@use 'sass:map';
@use 'sass:color' as color-module;
@use 'variables' as *;
@use 'mixins' as *;

// ============================================
// HERO SECTION
// ============================================

.hero {
  position: relative;
  background-color: color('bg-primary');

  // CORREÇÃO 1: Cálculo dinâmico para empurrar o conteúdo para baixo do Header (80px)
  padding: calc(80px + #{spacing('3xl')}) spacing('md') spacing('4xl') spacing('md');
  min-height: 100vh;

  // CORREÇÃO 2: Block no mobile respeita a altura real dos elementos e evita sobreposição no eixo Y
  display: block;
  overflow: hidden;

  @include respond-to('lg') {
    // No desktop temos espaço, então o flex center funciona perfeitamente
    padding: calc(80px + #{spacing('5xl')}) 0 spacing('5xl') 0;
    display: flex;
    align-items: center;
  }

  .hero-glow {
    $primary: map.get($colors, 'primary');
    position: absolute;
    top: 0; // Ajustado para não vazar pro header
    left: -10%;
    width: 80%; // Maior espalhamento no mobile
    height: 60%;
    background: radial-gradient(circle, rgba($primary, 0.15) 0%, transparent 70%);
    filter: blur(60px);
    z-index: 0;

    @include respond-to('lg') {
      top: -10%;
      left: -5%;
      width: 40%;
      height: 40%;
    }
  }

  .hero-grid {
    position: relative;
    z-index: z-index('base');

    // CORREÇÃO 3: Flex column empilha os itens de forma segura, garantindo a margem entre texto e formulário
    display: flex;
    flex-direction: column;
    gap: spacing('3xl');
    width: 100%;

    @include respond-to('lg') {
      display: grid;
      grid-template-columns: 1.2fr 1fr; // Proporção ideal para o desktop
      gap: spacing('4xl');
      align-items: center;
    }
  }
}

// ============================================
// TYPOGRAPHY (Hero Content)
// ============================================

.hero-content {
  text-align: center;

  @include respond-to('lg') {
    text-align: left;
  }

  .fixed-headline {
    color: color('dark');
    font-size: font-size('xl');
    line-height: map.get($line-heights, 'tight');
    margin-bottom: spacing('lg');

    @include respond-to('md') {
      font-size: font-size('2xl');
    }

    .weight-bold { font-weight: font-weight('extrabold'); }
    .text-error { color: color('error'); }
  }

  .animated-subheadline {
    color: color('dark');
    font-size: font-size('3xl');
    font-weight: font-weight('extrabold');
    line-height: map.get($line-heights, 'tight');

    @include respond-to('md') {
      font-size: font-size('5xl');
    }

    .rotating-text-wrapper {
      // Aumentado levemente para 1.4em para não cortar a base das letras no mobile
      height: 1.4em;
      position: relative;
      overflow: hidden;
      margin-top: spacing('xs');
      display: block;
    }

    .rotating-phrase {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      color: color('primary');
      opacity: 0;
      transform: translateY(100%);
      transition: all transition('slow') easing('bounce');

      &.active {
        opacity: 1;
        transform: translateY(0);
      }
      &:not(.active) {
        transform: translateY(-100%);
      }
    }
  }
}

// ============================================
// CARD PREMIUM & FORMULÁRIO
// ============================================

.hero-card-premium {
  @include card;
  border: 4px solid color('primary');
  padding: spacing('lg') spacing('xl');

  @include respond-to('md') {
    padding: spacing('xl') spacing('3xl');
  }

  .card-header {
    text-align: center;
    margin-bottom: spacing('lg');

    h3 {
      font-size: font-size('xl');
      font-weight: font-weight('extrabold');
      color: color('dark');
    }

    p {
      font-size: font-size('sm');
      color: color('gray');
    }
  }

  .input-group {
    margin-bottom: spacing('md');

    label {
      display: block;
      font-size: font-size('xs');
      font-weight: font-weight('bold');
      color: color('dark-gray');
      margin-bottom: spacing('xs');
      text-transform: uppercase;
    }

    input {
      width: 100%;
      height: 50px;
      padding: 0 spacing('md');
      background-color: color('bg-secondary');
      border: 1px solid color('light-gray');
      border-radius: map.get($border-radius, 'md');
      font-size: font-size('sm');
      transition: all transition('base') easing('smooth');

      &:focus {
        outline: none;
        border-color: color('primary');
        background-color: color('white');
        $primary-focus: map.get($colors, 'primary');
        box-shadow: 0 0 0 4px rgba($primary-focus, 0.1);
      }
    }
  }

  .btn-submit-premium {
    @include button-primary;
    width: 100%;
    height: 56px;
    font-size: font-size('lg');
    animation: buttonPulse 2s infinite;

    &:hover:not(:disabled) {
      animation: none;
    }

    &:disabled {
      background: color('light-gray');
      cursor: not-allowed;
      box-shadow: none;
      animation: none;
    }
  }

  .secure-footer {
    @include flex-center;
    gap: spacing('sm');
    margin-top: spacing('md');
    font-size: font-size('xs');
    color: color('gray');

    svg {
      width: 14px;
      color: color('primary');
    }
  }
}

// ============================================
// BARRA DE PROGRESSO DE ENVIO
// ============================================

.progress-container {
  position: relative;
  width: 100%;
  height: 56px;
  background-color: color('bg-secondary');
  border: 1px solid color('light-gray');
  border-radius: map.get($border-radius, 'md');
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);

  .progress-fill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;

    $primary: map.get($colors, 'primary');
    $primary-light: map.get($colors, 'primary-light');
    background: linear-gradient(135deg, $primary 0%, $primary-light 100%);

    transition: width 0.15s ease-out;
    z-index: 1;
  }

  .progress-text {
    position: relative;
    z-index: 2;
    font-size: font-size('sm');
    font-weight: font-weight('bold');
    color: color('dark');
    mix-blend-mode: color-burn;
  }
}

// ============================================
// FEEDBACK DE SUCESSO
// ============================================

.success-state {
  @include flex-column-center;
  text-align: center;
  padding: spacing('xl') 0;
  animation: fadeIn transition('slow') easing('smooth') forwards;

  .success-icon {
    $primary-color: map.get($colors, 'primary');
    width: 60px;
    height: 60px;
    background-color: rgba($primary-color, 0.1);
    color: $primary-color;
    border-radius: map.get($border-radius, 'full');
    @include flex-center;
    margin-bottom: spacing('lg');

    svg {
      width: 30px;
      height: 30px;
    }
  }

  h3 {
    font-size: font-size('xl');
    font-weight: font-weight('extrabold');
    color: color('dark');
    margin-bottom: spacing('sm');
  }

  p {
    font-size: font-size('sm');
    color: color('gray');
    line-height: map.get($line-heights, 'relaxed');
    max-width: 280px;
    margin: 0 auto;
  }
}

// ============================================
// KEYFRAMES ESPECÍFICOS DO HERO
// ============================================

@keyframes buttonPulse {
  0% {
    transform: scale(1);
    $primary-pulse: map.get($colors, 'primary');
    box-shadow: 0 10px 20px rgba($primary-pulse, 0.3);
  }
  50% {
    transform: scale(1.02);
    $primary-pulse: map.get($colors, 'primary');
    box-shadow: 0 15px 25px rgba($primary-pulse, 0.5);
  }
  100% {
    transform: scale(1);
    $primary-pulse: map.get($colors, 'primary');
    box-shadow: 0 10px 20px rgba($primary-pulse, 0.3);
  }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}