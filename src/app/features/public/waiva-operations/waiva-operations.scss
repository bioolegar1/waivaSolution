@use 'sass:map';
@use 'variables' as *;
@use 'mixins' as *;

// ============================================
// SECTION BACKGROUND
// ============================================
.section-operations {
  position: relative;
  padding: spacing('6xl') 0 spacing('8xl') 0;
  background-color: color('bg-secondary');
  overflow: hidden;
}

.split-background-angled {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 55%;
  background-color: color('primary');
  transform: skewY(-3deg);
  transform-origin: bottom right;
  z-index: 0;

  @include respond-to('md') {
    height: 45%;
  }
}

// Utilitários
.relative { position: relative; }
.z-10 { z-index: 10; }
.text-center { text-align: center; }

// Badge Pill
.badge-pill {
  display: inline-flex;
  align-items: center;
  padding: 6px 16px;
  background: rgba(color('primary'), 0.08);
  color: color('primary');
  border-radius: map.get($border-radius, 'full');
  font-size: 0.75rem;
  font-weight: 700;
  letter-spacing: 1px;
}

// ============================================
// GRID & CARDS
// ============================================

.cards-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: spacing('xl');
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 spacing('md');

  @include respond-to('md') {
    grid-template-columns: repeat(2, 1fr);
    gap: spacing('3xl');
    padding: 0;
  }
}

.tech-card {
  position: relative;
  background: color('white');
  border-radius: map.get($border-radius, '2xl');
  padding: spacing('2xl');
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  border: 1px solid transparent;

  $primary-color: map.get($colors, 'primary');
  box-shadow: 0 10px 30px -15px rgba($primary-color, 0.2);
  transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);

  // LÓGICA DE INÍCIO
  opacity: 0;

  // LÓGICA DE SCROLL: Ativado via JavaScript
  &.is-visible {
    animation: fadeUp 0.8s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;

    .card-shine {
      animation: shineMove 1.5s ease-in-out 0.8s forwards;
    }
  }

  // LÓGICA DE HOVER: Aplicação do scale(1.15) e elevação de camada
  &:hover {
    transform: scale(1.15); // Corresponde exatamente ao hover:scale-115
    z-index: 20; // Traz o cartão para a frente no ecrã para evitar cortes visuais
    border-color: rgba($primary-color, 0.3);
    box-shadow: 0 30px 60px -12px rgba($primary-color, 0.6); // Sombra compensada para a nova altura

    .icon-blob-pulse {
      background: color('primary');
      color: color('white');
      box-shadow: 0 10px 25px rgba($primary-color, 0.6);
      i { transform: scale(1.15) rotate(-5deg); }
    }

    .hover-line-gradient { width: 100%; opacity: 1; }
    .separator-gradient { width: 100%; opacity: 0.5; }

    .card-shine {
      animation: shineMoveHover 1.5s ease-in-out forwards;
    }
  }
}

// ============================================
// ELEMENTOS INTERNOS & ANIMAÇÕES
// ============================================

.card-shine {
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
                  120deg,
                  transparent,
                  rgba(color('white'), 0.5),
                  transparent
  );
  transform: skewX(-20deg);
  pointer-events: none;
  z-index: 2;
}

.icon-blob-pulse {
  width: 64px;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  $primary: map.get($colors, 'primary');
  $primary-light: map.get($colors, 'primary-light');
  background: linear-gradient(135deg, rgba($primary, 0.15), rgba($primary-light, 0.2));
  border-radius: map.get($border-radius, 'xl');
  color: color('primary');
  font-size: 1.75rem;
  margin-bottom: spacing('xl');
  transition: all 0.4s ease;
  animation: blobPulse 3s infinite ease-in-out;
  i { transition: transform 0.4s ease; }
}

.separator-gradient {
  height: 2px;
  width: 40px;
  $primary-light: map.get($colors, 'primary-light');
  background: linear-gradient(90deg, rgba($primary-light, 0.3), transparent);
  margin: spacing('lg') 0;
  transition: all 0.6s ease;
  opacity: 0.3;
}

.hover-line-gradient {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0%;
  height: 4px;
  $primary: map.get($colors, 'primary');
  $secondary: map.get($colors, 'secondary');
  background: linear-gradient(90deg, $primary, $secondary);
  transition: width 0.6s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.3s ease;
  opacity: 0;
  z-index: 3;
}

h3.heading-4 {
  font-weight: 800;
  letter-spacing: -0.01em;
}

p.text-body {
  color: color('gray');
  line-height: 1.7;
  font-size: 1.05rem;
}

// ============================================
// KEYFRAMES
// ============================================

@keyframes shineMove {
  0% { left: -100%; opacity: 0; }
  10% { opacity: 1; }
  100% { left: 200%; opacity: 0; }
}

@keyframes shineMoveHover {
  0% { left: -100%; opacity: 0; }
  10% { opacity: 1; }
  100% { left: 200%; opacity: 0; }
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(60px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes blobPulse {
  0% { box-shadow: 0 0 0 0 rgba(map.get($colors, 'primary'), 0.1); }
  70% { box-shadow: 0 0 0 15px rgba(map.get($colors, 'primary'), 0); }
  100% { box-shadow: 0 0 0 0 rgba(map.get($colors, 'primary'), 0); }
}