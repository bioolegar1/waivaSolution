// ============================================
// MIXINS - WAIVA SOLUTIONS
// ============================================

@use 'sass:map';
@use 'variables' as *;

// RESPONSIVE BREAKPOINTS
// ============================================

@mixin respond-to($breakpoint) {
  @if map.has-key($breakpoints, $breakpoint) {
    @media (min-width: map.get($breakpoints, $breakpoint)) {
      @content;
    }
  } @else {
    @warn "Breakpoint '#{$breakpoint}' não encontrado em $breakpoints";
  }
}

// Exemplo de uso:
// .elemento {
//   font-size: 14px;
//   @include respond-to('md') {
//     font-size: 16px;
//   }
// }

// CONTAINER
// ============================================

@mixin container {
  width: 100%;
  max-width: $container-max-width;
  margin-left: auto;
  margin-right: auto;
  padding-left: $container-padding;
  padding-right: $container-padding;
}

// FLEXBOX UTILITIES
// ============================================

@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@mixin flex-column {
  display: flex;
  flex-direction: column;
}

@mixin flex-column-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

// GRADIENTES
// ============================================

@mixin gradient-primary {
  background: linear-gradient(
                  135deg,
                  color('bg-gradient-start') 0%,
                  color('bg-gradient-end') 100%
  );
}

@mixin gradient-overlay {
  background: linear-gradient(
                  180deg,
                  rgba(color('dark'), 0.7) 0%,
                  rgba(color('dark'), 0.9) 100%
  );
}

// BOTÕES
// ============================================

@mixin button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: spacing('sm');
  padding: spacing('md') spacing('xl');
  font-family: map.get($font-family, 'primary');
  font-size: map.get($font-sizes, 'base');
  font-weight: map.get($font-weights, 'semibold');
  line-height: 1;
  text-align: center;
  text-decoration: none;
  border: none;
  border-radius: map.get($border-radius, 'lg');
  cursor: pointer;
  transition: all map.get($transitions, 'base') map.get($easings, 'smooth');
  white-space: nowrap;
  user-select: none;

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
  }

  &:focus-visible {
    outline: 2px solid color('primary');
    outline-offset: 2px;
  }
}

@mixin button-primary {
  @include button-base;
  background: color('primary');
  color: color('white');
  box-shadow: map.get($shadows, 'md');

  &:hover:not(:disabled) {
    background: color('primary-dark');
    transform: translateY(-2px);
    box-shadow: map.get($shadows, 'lg');
  }

  &:active:not(:disabled) {
    transform: translateY(0);
  }
}

@mixin button-secondary {
  @include button-base;
  background: transparent;
  color: color('primary');
  border: 2px solid color('primary');

  &:hover:not(:disabled) {
    background: color('primary');
    color: color('white');
  }
}

@mixin button-ghost {
  @include button-base;
  background: transparent;
  color: color('gray');

  &:hover:not(:disabled) {
    background: color('lighter-gray');
    color: color('dark');
  }
}

// CARDS
// ============================================

@mixin card {
  background: color('white');
  border-radius: map.get($border-radius, 'xl');
  padding: spacing('2xl');
  box-shadow: map.get($shadows, 'md');
  transition: all map.get($transitions, 'base') map.get($easings, 'smooth');
}

@mixin card-hover {
  &:hover {
    transform: translateY(-4px);
    box-shadow: map.get($shadows, 'xl');
  }
}

// ANIMAÇÕES DE ENTRADA
// ============================================

@mixin fade-in {
  animation: fadeIn map.get($transitions, 'slow') map.get($easings, 'smooth');
}

@mixin slide-up {
  animation: slideUp map.get($transitions, 'slow') map.get($easings, 'smooth');
}

// OVERLAY
// ============================================

@mixin overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(color('dark'), 0.6);
  z-index: map-get($z-index, 'modal-backdrop');
}

// TEXTO COM ELLIPSIS
// ============================================

@mixin text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@mixin line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// ASPECT RATIO
// ============================================

@mixin aspect-ratio($width, $height) {
  aspect-ratio: #{$width} / #{$height};

  // Fallback para navegadores antigos
  @supports not (aspect-ratio: 1 / 1) {
    position: relative;

    &::before {
      content: '';
      display: block;
      padding-top: calc(($height / $width) * 100%);
    }

    > * {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  }
}

// SCROLLBAR CUSTOMIZADA
// ============================================

@mixin custom-scrollbar {
  &::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  &::-webkit-scrollbar-track {
    background: color('lighter-gray');
    border-radius: map.get($border-radius, 'full');
  }

  &::-webkit-scrollbar-thumb {
    background: color('gray');
    border-radius: map.get($border-radius, 'full');

    &:hover {
      background: color('dark-gray');
    }
  }

  scrollbar-width: thin;
  scrollbar-color: color('gray') color('lighter-gray');
}

// BACKDROP BLUR (efeito glassmorphism)
// ============================================

@mixin glass-effect {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

// RESET DE INPUTS
// ============================================

@mixin input-reset {
  appearance: none;
  border: none;
  background: none;
  outline: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: inherit;
}

// VISUALLY HIDDEN (acessibilidade)
// ============================================

@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}